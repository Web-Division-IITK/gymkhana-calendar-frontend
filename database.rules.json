{
  "rules": {
    "approved": {
    	".read":"true",
    	"entities": {
				".write":"false"
  		},
    	"$entity": {
    		"$event": {
    			".write": "auth.token.roles[$entity] === 'approve' 
    							|| auth.token.admin === true 
    							|| (auth.token.roles[$entity] === true 
    									&& data.exists())",
    			"name": {
    				".validate": "newData.isString() && newData.val() != ''"
    			},
    			"desc": {
    				".validate": "newData.isString() && newData.val() != ''"
    			},
    			"venue": {
    				".validate": "newData.isString() && newData.val() != ''"
    			},
    			"date": {
    				".validate": "(newData.isNumber() && newData.val() > (now - (now % 86400000) + 330*60*1000)) || auth.token.roles[$entity] === 'approve' || auth.token.admin === true"
    			},
    			"duration": {
    				".validate": "newData.isNumber() && newData.val() <= 1440 - ((newData.parent().child('date').val() + 330*60*1000) % (1000*60*60*24))/60000"
    			},
    			"image": {
    				".validate": "true"
    			},
    			"$other": {
    				".validate": "false"
    			}
    		}
    	}
    },
    "requested": {
    	".read": "auth !== null",
    	"$entity": {
    		".write": "auth.token.roles[$entity] !== null || auth.token.admin === true",
    		"$eventid": {
    			"name": {
    				".validate": "newData.isString() && newData.val() != ''"
    			},
    			"desc": {
    				".validate": "newData.isString() && newData.val() != ''"
    			},
    			"venue": {
    				".validate": "newData.isString() && newData.val() != ''"
    			},
    			"date": {
    				".validate": "(newData.isNumber() && newData.val() > (now - (now % 86400000) + 330*60*1000)) || auth.token.roles[$entity] === 'approve' || auth.token.admin === true"
    			},
    			"duration": {
    				".validate": "newData.isNumber() && newData.val() <= 1440 - ((newData.parent().child('date').val() + 330*60*1000) % (1000*60*60*24))/60000"
    			},
    			"image": {
    				".validate": "true"
    			},
    			"$other": {
    				".validate": "false"
    			}
    		}
    	}
    },
    "notifications": {
			".read": "false",
			".write": "false"
    }
  }
}